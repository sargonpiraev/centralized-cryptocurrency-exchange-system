---
description: Здесь описывается сценарий для Выполнения код-ревью. 
globs: 
alwaysApply: false
---
Сode Review Workflow

Здесь описан алгоритм выполнения процесса code review 
То есть когда я говорю: Сделай код-ревью этого мерж реквеста
то нужно этот процесс использовать. 

Параметр: ссылка на Мерж реквест Gitlab


Порядок проведения код-ревью такой:

Получи информацию по мерж-реквесту из GitLab 
(важно! project_id = namespace/project-name из ссылки на мершей квест)

В названии ветки есть номер Jira-тикета
Проверь, что он в статусе To Code Review. 
Выставить статус этому Jira-тикету в Code Review In Progress 
Получить описание этого Jira тикета из джири

Получить описание по этой Jira задаче
(используй fields=*all для получения всех полей) 

Если в описании Jira Ticket есть ссылка на Confluence по документации
  то вытащите информацию по этой документации.
Если в описании Jira Ticket есть ссылка на Эпик 
  то вытащите информацию по этому Эпику.
Если в описании Эпика есть ссылка на Confluence по документации
  то вытащите информацию по этой документации.
Получить дифф по этому мерж-реквесту из GitLab
проверить этот диф на соответствии требованиям по задаче
Если все хорошо
  то отправить комментарий в Джире что все хорошо ставлю Аппрув.
  И поставить статус Jira Ticket в To Test
Если есть какие-то замечания
  то отправить комментарий с замечаниями В GitLab Мерж-реквест
  и поставить статус jira тикету в To Do